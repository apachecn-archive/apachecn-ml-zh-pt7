<html><head/><body>


	
		<title>B16721_03_Final_SK_ePub</title>
		
	
	
		<div><h1 id="_idParaDest-43"><em class="italic"> <a id="_idTextAnchor042"/>第三章</em>:基础工作流程——数据到可部署模型</h1>
			<p>在这一章中，我们将为H2O按比例创建一个最小的模型。我们将<a id="_idIndexMarker123"/>称之为<em class="italic">基本工作流程</em>，因为它忽略了构建准确、可信模型的广泛功能和用户选择，但仍然触及了主要步骤。</p>
			<p>基本工作流程将作为建立您对H2O技术和编码步骤理解的基础，以便在本书的下一部分中，您可以完全投入到构建最先进模型的高级技术中。</p>
			<p>为了开发基本的工作流程，我们将在本章中讨论以下主要主题:</p>
			<ul>
				<li>用例及数据概述</li>
				<li>基本工作流程</li>
				<li>变化点——基本工作流程的替代和扩展</li>
			</ul>
			<h1 id="_idParaDest-44"><a id="_idTextAnchor043"/>技术要求</h1>
			<p>在本章中，我们将重点介绍如何使用Enterprise Steam在企业服务器集群上启动H2O集群。从技术上讲，启动H2O集群并不需要Enterprise Steam，但是企业利益相关方通常会将Enterprise Steam视为在企业环境中实施H2O的安全、治理和管理员要求。</p>
			<p>Enterprise Steam需要从H2O.ai购买许可证。如果您的组织没有安装Enterprise Steam的实例，您可以通过更大的H2O平台的临时试用许可证来访问Enterprise Steam和企业服务器集群。或者，为了便于进行本书中的练习，您可能希望在您的本地环境中(例如，在您的笔记本电脑或桌面工作站上)启动H2O集群作为沙箱，并绕过企业级Steam的使用。</p>
			<p>请参见<a href="B16721_Appendix_Final_SK_ePub.xhtml#_idTextAnchor268"> <em class="italic">附录</em></a><em class="italic">–本书启动H2O集群的替代方法</em>以帮助您决定如何启动H2O集群来完成本书中的练习，以及如何设置您的环境来完成此操作。</p>
			<p class="callout-heading">企业蒸汽:企业环境与书中的编码练习</p>
			<p class="callout">企业利益相关者通常将<a id="_idIndexMarker124"/>企业Steam视为在企业环境中实施H2O的安全、治理和管理员需求。本章展示了数据科学家如何在这个企业环境中使用企业Steam。然而，Enterprise Steam需要一个H2O.ai许可证才能实现，并且不会向本书的所有读者提供。</p>
			<p class="callout">一个简单的沙盒(非企业)体验是在您的本地环境(笔记本电脑或工作站)上专门使用H2O，这不需要企业级Steam。后续章节中的编码练习将利用本地沙盒环境，但也可以使用本章中演示的Enterprise Steam来执行。</p>
			<p class="callout">请注意，使用和不使用Enterprise Steam的data scientist工作流之间的区别仅限于工作流的第一步(启动H2O集群),我们将在本章的稍后部分对此进行详细介绍。参见<a href="B16721_Appendix_Final_SK_ePub.xhtml#_idTextAnchor268"> <em class="italic">附录</em></a><em class="italic">——启动H2O集群的替代方法</em>。</p>
			<h1 id="_idParaDest-45"><a id="_idTextAnchor044"/>用例及数据概述</h1>
			<p>为了演示<a id="_idIndexMarker125"/>基本工作流，我们将实现一个二元分类问题，在这里我们预测贷款是否违约的可能性。我们在本章中使用的数据集可以在<a href="https://github.com/PacktPublishing/Machine-Learning-at-Scale-with-H2O/blob/main/chapt3/loans-lite.csv">https://github . com/packt publishing/Machine-Learning-at-Scale-with-H2O/blob/main/chapt 3/loans-lite . CSV</a>中找到。(这是简化版的Kaggle <em class="italic">借贷俱乐部贷款</em>数据集:<a href="https://www.kaggle.com/imsparsh/lending-club-loan-dataset-2007-2011">https://www . ka ggle . com/imsparsh/Lending-Club-Loan-dataset-2007-2011</a>。)</p>
			<p>我们使用数据集的简化版本来简化本章中的工作流程。在<em class="italic">第2部分，构建最先进的大规模模型</em>中，我们将在原始贷款数据集上使用高级H2O模型构建功能开发此用例。</p>
			<h1 id="_idParaDest-46"><a id="_idTextAnchor045"/>基本工作流程</h1>
			<p>我们的基本<a id="_idIndexMarker126"/>工作流程将通过以下步骤进行:</p>
			<ol>
				<li>启动H2O集群(企业Steam UI)</li>
				<li>连接到H2O集群(从现在开始就是您的IDE)</li>
				<li>构建模型</li>
				<li>评估和解释模型</li>
				<li>为生产部署导出模型</li>
				<li>关闭H2O·克鲁斯<a id="_idTextAnchor046"/>号</li>
			</ol>
			<h2 id="_idParaDest-47"><a id="_idTextAnchor047"/>步骤1–启动H2O集群</h2>
			<p>这个<a id="_idIndexMarker127"/>步骤是从企业Steam用户界面<a id="_idIndexMarker128"/>完成的。您将选择是需要H2O-3集群还是苏打水集群，然后配置H2O集群的行为，例如超时和终止前的空闲时间，以及是否要在终止时保存状态，以便可以重新启动集群并从停止的地方开始(这必须由管理员启用)。很好，Enterprise Steam会根据您的数据大小自动调整H2O集群的大小(节点数量、每个节点的内存、CPU)。</p>
			<h3>登录到Steam</h3>
			<p>打开<a id="_idIndexMarker129"/>一个网络浏览器<a id="_idIndexMarker130"/>并转到<code>https://steam-url:9555/login</code>并登录<a id="_idIndexMarker131"/>到企业Steam，其中<code>steam-url</code>是您的特定Steam实例的URL。(您的管理员可能已经更改了端口号，但通常是URL中显示的<code>9555</code>。)</p>
			<h3>为H2O-3(对比苏打水)集群选择H2O</h3>
			<p>在这里，我们<a id="_idIndexMarker132"/>将启动H2O-3集群(而不是苏打水，我们将在本书的下一部分中进行)，因此单击左侧面板中的<strong class="bold"> H2O </strong>链接，然后单击<strong class="bold">启动新集群</strong>。</p>
			<h3>配置H2O-3集群</h3>
			<p>这个<a id="_idIndexMarker133"/>将我们带到下面的表单，您将配置它:</p>
			<div><div><img src="img/B16721_03_01.jpg" alt="Figure 3.1 – UI to launch an H2O-3 cluster on Kubernetes&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图3.1–在Kubernetes上启动H2O-3集群的用户界面</p>
			<p>现在，我们将忽略大多数配置。这些将在<a href="B16721_11_Final_SK_ePub.xhtml#_idTextAnchor207"> <em class="italic">第11章</em> </a>、<em class="italic">管理员和操作视图</em>中更全面地介绍，其中详细概述了企业Steam。请注意，配置页面使用术语<em class="italic"> H2O星团</em>来具体表示<a id="_idIndexMarker134"/> H2O-3星团，而在本书中，我们使用术语H2O星团来表示H2O-3或苏打水星团。</p>
			<p class="callout-heading">关于“配置H2O-3集群”屏幕截图的说明</p>
			<p class="callout">根据H2O集群是在Kubernetes环境还是在基于YARN的Hadoop或Spark环境中启动，图3.1 中显示的屏幕细节会有所不同。根据H2O星团是H2O-3星团还是苏打水星团，细节也会有所不同。然而，在所有情况下，H2O集群大小(节点数量、每个节点的CPU/GPU和每个节点的内存)和最大空闲/正常运行时间的基本概念始终是通用的。</p>
			<p>为您的集群命名，对于<strong class="bold">数据集参数</strong>，单击<strong class="bold">设置参数</strong>出现以下弹出窗口:</p>
			<div><div><img src="img/B16721_03_02.jpg" alt="Figure 3.2 – Popup to automatically size the H2O-3 cluster&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图3.2–自动调整H2O-3集群大小的弹出窗口</p>
			<p>Enterprise Steam使用这里的输入来自动调整H2O集群的大小(也就是说，确定H2O节点的数量、为每个节点分配的内存以及为每个节点分配的CPU)。回想一下前一章中介绍的H2O集群的<em class="italic">关键概念</em>。</p>
			<h3>短暂等待集群启动</h3>
			<p><a id="_idIndexMarker135"/>UI中的<strong class="bold">状态</strong>字段将显示<strong class="bold">开始</strong>，表示H2O集群正在企业服务器集群上启动。这需要一两分钟。当状态变为<strong class="bold">正在运行</strong>时，您的H2O集群就可以使用了。</p>
			<h3>查看集群的详细信息</h3>
			<p>让我们首先通过点击<strong class="bold">动作</strong>和<strong class="bold">细节</strong>来<a id="_idIndexMarker136"/>了解一些关于集群的事情。这将生成一个描述集群的弹出窗口。</p>
			<p>请注意，在这种情况下，节点的<strong class="bold">数量为<strong class="bold"> 6 </strong>，每个节点</strong>的<strong class="bold">内存为<strong class="bold"> 48 GB </strong>，这是由Enterprise Steam针对50 GB的数据集大小自动调整的，如图<em class="italic">图3.1 </em>所示。回想一下上一章的<em class="italic"> H2O关键概念</em>部分，我们的数据集被分区并分布在企业服务器集群上的这个数量的H2O集群节点的内存中，并且计算是在这些H2O节点上并行完成的。</strong></p>
			<p class="callout-heading">关于H2O集群规模的说明</p>
			<p class="callout">一般来说，H2O集群的大小是这样确定的，即分配给该集群的总内存(即每个节点的<em class="italic"> N </em> H2O节点和<em class="italic"> X </em> GB内存的乘积)大约是将用于建模的未压缩数据集大小的5倍。该计算最大限度地减少了节点数量(即节点越少，每个节点的内存越多越好)。</p>
			<p class="callout">Enterprise Steam将根据您对数据集的描述来计算这一规模，但是您也可以通过Enterprise Steam UI自己调整集群的规模。当H2O集群终止时，分配给H2O集群的总内存将被释放。</p>
			<p class="callout">请注意，企业Steam管理员设置用户在启动H2O集群时可能拥有的最小和最大配置值(请参见<em class="italic">图3.1 </em>)，从而设置用户可以启动的最大H2O集群大小。管理员设置的这些边界可以针对不同的用户进行不同的配置。</p>
			<h2 id="_idParaDest-48"><a id="_idTextAnchor048"/>步骤2–连接到H2O集群</h2>
			<p>这一步和所有后续步骤都来自您的IDE。我们将使用Jupyter笔记本并用Python编写代码(尽管其他选项包括使用您喜欢的IDE用R、Java或Scala编写H2O)。</p>
			<p>打开笔记本，通过编写以下代码连接到您在Enterprise Steam中启动的H2O集群:</p>
			<pre class="source-code">import h2o</pre>
			<pre class="source-code">import h2osteam</pre>
			<pre class="source-code">from h2osteam.clients import H2oKubernetesClient</pre>
			<pre class="source-code">conn = h2osteam.login(url="https://steam-url:9555",</pre>
			<pre class="source-code">                      username="my-steam-username",</pre>
			<pre class="source-code">                      password="my-steam-password")</pre>
			<pre class="source-code">cluster = H2oKubernetesClient().get_cluster("cluster-name")</pre>
			<pre class="source-code">cluster.connect()</pre>
			<p>您现在已经连接到H2O集群，可以开始构建模型了。请注意，连接后，您将看到H2O集群的详细信息，类似于在启动前配置集群时从Enterprise Steam UI中看到的信息。</p>
			<p>让我们了解一下代码在做什么:</p>
			<ol>
				<li value="1">您引用了从H2O下载并在IDE环境中实现的<code>h2osteam</code>和<code>h2o</code> Python库。(<code>h2o</code>库没有被这里显示的代码使用，但是将被随后的模型构建步骤使用。)</li>
				<li>然后你通过<code>h2osteam</code> API(库)登录到企业Steam服务器。您使用了与登录到Enterprise Steam的UI相同的URL、用户名和密码。</li>
				<li>然后，您通过<code>h2osteam</code> API从Enterprise Steam中检索您的H2O集群信息。</li>
				<li>请注意，这里使用的是<code>H2oKubernetesClient</code>,因为您正在连接到一个在Kubernetes环境中启动的H2O集群。或者，如果您的企业环境是Hadoop或Spark，您可以分别使用<code>H2oClient</code>或<code>SparklingClient</code>。</li>
				<li>You<a id="_idIndexMarker139"/> connected to your H2O cluster using <code>cluster.connect()</code> and passed the cluster information to the <code>h2o</code> API. Note that you did not have to specify any URL to the H2O cluster because Steam returned this behind the scenes with <code>H2oKubernetesClient().get_cluster("cluster-name")</code>.<p class="callout-heading">创建H2O沙盒环境</p><p class="callout">如果您希望<a id="_idIndexMarker140"/>在您的本地机器上创建一个小型H2O沙盒，而不是使用企业Steam和您的企业服务器集群，只需在您的IDE中实现以下两行代码:</p><p class="callout"><code>import h2o</code></p><p class="callout"><code>h2o.init()</code></p><p class="callout">结果与使用Enterprise Steam执行<em class="italic">步骤1–2</em>相同，除了它在本地机器上启动一个带有一个节点的H2O集群并连接到它。</p><p class="callout">无论是在企业环境中还是在本地机器上连接到H2O集群，现在都可以从IDE中针对相应的集群编写相同的建模步骤。对于沙箱，当然，您将被限制到更小的数据量，因为它只有一个低内存节点的集群大小。</p></li>
			</ol>
			<h2 id="_idParaDest-49"><a id="_idTextAnchor049"/>第3步–建立模型</h2>
			<p>既然我们已经连接到我们的H2O集群，现在是时候构建模型了。从现在开始，您将使用<code>h2o</code> API与您启动并连接的H2O集群进行通信。</p>
			<p>在我们的基本工作流程中，我们将采用最简单的方法来导入数据、清理数据、设计数据中的特征，然后训练模型。</p>
			<h3>导入数据</h3>
			<p>使用<code>h2o.import_file</code>命令将贷款<a id="_idIndexMarker142"/>数据集从源加载到H2O-3集群存储器，如下所示:</p>
			<pre class="source-code">input_csv = "https://raw.githubusercontent.com/PacktPublishing/Machine-Learning-at-Scale-with-H2O/main/chapt3/loans-lite.csv"</pre>
			<pre class="source-code">loans = h2o.import_file(input_csv)</pre>
			<pre class="source-code">loans.dim</pre>
			<pre class="source-code">loans.head()</pre>
			<p><code>loans.dim</code>行给出了行数和列数，而<code>loans.head()</code>显示了前10行。目前非常简单的数据探索。</p>
			<p>请注意，数据集现在已经分区并分布在H2O集群的内存中。从我们在IDE中的编码角度来看，它被视为由列和行组成的单一二维数据结构<a id="_idIndexMarker143"/>，称为<strong class="bold">H2 of frame</strong>。</p>
			<h3>清理数据</h3>
			<p>让我们执行一个简单的数据清理步骤。目标或响应列称为<code>bad_loan</code>，它分别为好贷款和坏贷款保存值0或1。我们需要将该列中的整数转换为分类值，如下所示:</p>
			<pre class="source-code">loans["bad_loan"] = loans["bad_loan"].asfactor()</pre>
			<h3>根据原始数据设计新功能</h3>
			<p>特征工程<a id="_idIndexMarker145"/>通常被认为是构建卓越预测模型的<em class="italic">秘方</em>。出于我们现在的目的，我们将通过从<code>issue_d</code>列中提取年和月作为单独的特征来进行基本的特征工程，该列将日、月和年保存为单个值:</p>
			<pre class="source-code">loans["issue_d_year"] = loans["issue_d"].year().asfactor()</pre>
			<pre class="source-code">loans["issue_d_month"] = loans["issue_d"].month().asfactor()</pre>
			<p>我们<a id="_idIndexMarker146"/>刚刚在我们的<code>loans</code>数据集中创建了两个新的分类列:<code>issue_d_year</code>和<code>issue_d_month</code>。</p>
			<h3>模特培训</h3>
			<p>接下来我们将<a id="_idIndexMarker147"/>训练一个模型来预测不良贷款。我们首先将数据分成<code>train</code>和<code>test</code>:</p>
			<pre class="source-code">train, validate, test = loans.split_frame(seed=1, ratios=[0.7, 0.15])</pre>
			<p>我们现在需要确定我们将使用哪些列来预测贷款是否是坏账。我们将通过从当前的loans H2OFrame中删除两列来实现这一点，这两列保存了经过清理和设计的数据:</p>
			<pre class="source-code">predictors = list(loans.col_names)</pre>
			<pre class="source-code">predictors.remove("bad_loan)</pre>
			<pre class="source-code">predictors.remove("issue_d")</pre>
			<p>请注意，我们从用作特性的列中删除了<code>bad_loan</code>，因为这是我们所预测的。我们还删除了<code>issue_d</code>,因为我们在此基础上设计了新功能，不希望它成为预测器。</p>
			<p>接下来，让我们创建一个XGBoost模型来预测贷款违约:</p>
			<pre class="source-code">from h2o.estimators import H2OXGBoostEstimator</pre>
			<pre class="source-code">param = {</pre>
			<pre class="source-code">         "ntrees" : 20,</pre>
			<pre class="source-code">         "nfolds" : 5,</pre>
			<pre class="source-code">         "seed": 12345</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">model = H2OXGBoostEstimator(**param)</pre>
			<pre class="source-code">model.train(x = predictors,</pre>
			<pre class="source-code">            y = "bad_loan",</pre>
			<pre class="source-code">            training_frame = train,</pre>
			<pre class="source-code">            validation_frame = validate)</pre>
			<h2 id="_idParaDest-50"><a id="_idTextAnchor050"/>第4步-评估和解释模型</h2>
			<p>让我们评估一下<a id="_idIndexMarker148"/>我们刚刚培训的模型的性能:</p>
			<pre class="source-code">perf = model.model_performance(test)</pre>
			<pre class="source-code">perf</pre>
			<p><code>perf</code>的<a id="_idIndexMarker149"/>输出显示了模型性能的细节，包括MSE、Logloss、AUC等模型指标，以及混淆矩阵、最大指标阈值和增益/提升表。</p>
			<p>现在，让我们通过从模型结果中生成变量重要性来查看模型可解释性的一个简单视图:</p>
			<pre class="source-code">explain = model.explain(test,include_explanations="varimp")</pre>
			<pre class="source-code">explain</pre>
			<p><code>explain</code>的输出显示了针对测试数据集运行的训练模型的可变重要性。这张表列出了每个特征对模型的贡献有多大。</p>
			<p>正如我们将在本书后面看到的，H2O的模型可解释能力比变量重要性更进一步。</p>
			<h2 id="_idParaDest-51"><a id="_idTextAnchor051"/>步骤5–导出模型的评分工件</h2>
			<p>现在，让我们生成<a id="_idIndexMarker150"/>并将模型导出为评分工件，该工件可以由DevOps小组部署到生产环境中:</p>
			<pre class="source-code">model.download_mojo("download-destination-path")</pre>
			<p>当然，在现实世界中，我们会训练许多模型，并比较它们的性能和可解释性，以评估哪个(如果有的话)应该进入生产。</p>
			<h2 id="_idParaDest-52"><a id="_idTextAnchor052"/>步骤6–关闭集群</h2>
			<p>当您的<a id="_idIndexMarker151"/>工作完成时，关闭H2O-3集群以释放它所保留的资源:</p>
			<pre class="source-code">h2o.cluster().shutdown()</pre>
			<h1 id="_idParaDest-53"><a id="_idTextAnchor053"/>变化点——基本工作流程的替代和扩展</h1>
			<p>我们在这里开发的基本工作流程是一个简单的例子。对于我们执行的每一步，都有多种选择和扩展。所有的<em class="italic">第二部分:建造最先进的大规模模型，</em>致力于理解这些选择和精心制作，并把它们放在一起建造卓越的大规模模型。</p>
			<p>让我们先来看一些关键的变化点。</p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor054"/>使用企业Steam API和UI启动H2O集群(步骤1)</h2>
			<p>在我们的<a id="_idIndexMarker153"/>示例中，我们使用企业Steam UI的便利性来配置和启动一个H2O集群。或者，我们可以使用IDE中的Steam API来实现这一点。关于Python API，请参见位于<a href="https://docs.h2o.ai/enterprise-steam/latest-stable/docs/python-docs/index.html">https://docs . H2O . ai/Enterprise-Steam/latest-stable/docs/Python-docs/index . html</a>的完整H2O企业Steam API文档，关于R API，请参见<a href="https://docs.h2o.ai/enterprise-steam/latest-stable/docs/r-docs/index.html">https://docs . H2O . ai/Enterprise-Steam/latest-stable/docs/R-docs/index . html</a>。</p>
			<p>通过从我们的IDE中启动H2O集群，我们就可以完全从IDE中完成我们工作流的所有步骤1–6。</p>
			<h2 id="_idParaDest-55"><a id="_idTextAnchor055"/>启动H2O-3对比苏打水集群(步骤1)</h2>
			<p>在我们的<a id="_idIndexMarker154"/>示例中，我们启动了一个H2O-3集群。我们也可以推出H2O苏打水集群。正如我们将看到的，苏打水集群具有与H2O-3集群相同的功能集，但具有将Spark代码和Spark数据帧与H2O代码和H2O数据帧集成的额外能力。在H2O建立模型之前，利用Spark进行高级数据探索和数据管理时，这一点尤为重要。</p>
			<h2 id="_idParaDest-56"><a id="_idTextAnchor056"/>是否实施企业Steam(步骤1-2)</h2>
			<p>要知道，启动和连接到企业服务器集群并不需要Enterprise Steam <a id="_idIndexMarker155"/>:数据科学家可以只使用IDE中的<code>h2o</code>(而不是<code>h2osteam</code> ) API来配置、启动和连接到企业服务器集群，但这是底层编码和配置，需要详细的集成信息。重要的是，这种方法缺乏可靠的企业安全、治理和集成实践。</p>
			<p>在企业设置中，企业Steam被视为在企业服务器集群环境中集中、管理和治理H2O技术和H2O用户的基本要素。这些功能在第11章 、<em class="italic">管理员和操作视图</em>中有详细说明。</p>
			<h2 id="_idParaDest-57"><a id="_idTextAnchor057"/>使用个人访问令牌登录企业Steam(步骤2)</h2>
			<p>对于<em class="italic">步骤2——连接到H2O集群</em>,我们使用Enterprise Steam API从我们的IDE <a id="_idIndexMarker156"/>向Enterprise Steam认证。在示例代码中，我们使用了一个明文密码(该密码与用于登录企业Steam UI的密码相同)。例如，如果您共享了笔记本，这是不安全的。</p>
			<p>或者，更安全地说，您可以<a id="_idIndexMarker157"/>使用一个<strong class="bold">个人访问令牌</strong> ( <strong class="bold">帕特</strong>)作为企业Steam的API登录密码。您可以根据需要随时生成PAT，每个新生成的PAT都会撤销前一个PAT。因此，如果您使用PAT作为密码与您的登录凭证共享Jupyter笔记本，笔记本的接收者将不会知道您的Enterprise Steam UI登录密码，并且无法使用您共享笔记本中已撤销的密码通过API进行身份验证。您可以更进一步，将PAT实现为ide外部的环境变量。</p>
			<p>Enterprise Steam允许您从UI生成PAT。要生成PAT，请登录企业Steam UI，单击<strong class="bold">配置、</strong>并遵循简短的令牌工作流程。复制结果(一个长字符串)以便在当前笔记本或脚本中使用，或者将其设置为环境变量。</p>
			<h2 id="_idParaDest-58"><a id="_idTextAnchor058"/>构建模型(步骤3)</h2>
			<p>H2O提供了比我们的基本工作流程更强大的建模体验。这种更大的体验在这里有所涉及，并在<em class="italic">第2部分,</em>中进行了充分的探讨。</p>
			<h3>语言和IDE</h3>
			<p>我们正在Jupyter笔记本上用Python写H2O代码。您还可以为企业Steam API选择R，并使用您选择的Python或R IDE。此外，您可以使用H2O的UI丰富的IDE，称为<strong class="bold"> H2O流</strong>来<a id="_idIndexMarker160"/>执行完整的工作流，或者快速了解从您自己的IDE进行的H2O集群工作流的各个方面。</p>
			<h3>导入数据</h3>
			<p>数据可以从许多来源导入H2O集群，包括云对象存储(例如，S3或Azure Delta湖)、数据库表(通过JDBC)、HDFS等等。此外，源文件可以有多种格式，包括拼花、ORC、ARFF等。</p>
			<h3>清理数据和工程特征</h3>
			<p>H2O-3具有基本数据操作的能力<a id="_idIndexMarker162"/>(例如，改变列类型、合并或分割<a id="_idIndexMarker163"/>行或列、分组、估算等等)。</p>
			<p>回想一下，启动Sparkling Water集群为我们提供了完整的H2O-3功能，以及Spark更强大的数据探索和工程功能。</p>
			<h3>模特培训</h3>
			<p>在我们的基本工作流程中，我们只研究了一种类型的模型(XGBoost ),同时只改变了几个默认参数。H2O-3(及其苏打水扩展)有一个监督和非监督学习算法的广泛列表，以及一系列广泛的参数和超参数来设置您的规格。此外，这些算法可以有力地结合到AutoML工作流中，该工作流探索多个模型和超参数<a id="_idIndexMarker165"/>空间，并在排行榜上排列产生的最佳模型。您还可以控制交叉验证技术、检查点、再培训和再现性。</p>
			<h2 id="_idParaDest-59"><a id="_idTextAnchor059"/>评估和解释模型(步骤4)</h2>
			<p>H2O有<a id="_idIndexMarker166"/>多种解释方法<a id="_idIndexMarker167"/>和局部(个体)和全局(模型级)解释的可视化，包括残差分析、可变重要性热图、Shapley汇总、<strong class="bold">部分依赖图</strong> ( <strong class="bold"> PDPs </strong>)和<strong class="bold">个体条件期望</strong> ( <strong class="bold"> ICE </strong>)。</p>
			<h2 id="_idParaDest-60"><a id="_idTextAnchor060"/>导出模型的评分工件(步骤5)</h2>
			<p>一旦<a id="_idIndexMarker168"/>您导出了模型的评分工件(称为H2O MOJO)，就可以让DevOps在实时评分环境中部署和监控了。它可能会进入组织的CI/CD流程。我们将在第3部分<em class="italic">的这一点上继续学习，将您的模型部署到生产环境</em>。</p>
			<h2 id="_idParaDest-61"><a id="_idTextAnchor061"/>关闭集群(步骤6)</h2>
			<p>您可以<a id="_idIndexMarker169"/>从您的IDE中关闭您的集群，如我们的示例工作流所示。如果你注意到了，当在Enterprise Steam中配置集群时，有两个配置可以自动关闭进程:<strong class="bold">最大空闲时间</strong>和<strong class="bold">最大正常运行时间</strong>。第一种方法是在群集超过配置的使用时间后关闭群集。第二个选项是在群集运行了配置的时间后关闭群集。关闭集群(手动或自动)可以为使用企业服务器集群的其他人节省资源。</p>
			<p>管理员为这些自动终止配置分配最小和最大值。请注意，如果由管理员启用，Enterprise Steam会在H2O集群自动终止时保存所有模型和数据帧。您可以稍后重新启动集群，并从集群终止的地方开始。</p>
			<h1 id="_idParaDest-62"><a id="_idTextAnchor062"/>总结</h1>
			<p>在本章中，您学习了如何从您的IDE启动H2O集群并在其上构建模型。这个基本的工作流程只是一个框架，你可以用一套先进的H2O模型构建技术来更全面地充实它，我们将在本书的第<em class="italic">部分第2部分“按比例构建最先进的模型”中学习这些技术。</em></p>
			<p>我们将在下一章开始这个高级旅程，在使用这些功能之前先对它们进行概述。</p>
		</div>
	

</body></html>